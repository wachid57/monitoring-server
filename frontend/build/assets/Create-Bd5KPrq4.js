import{r as b,G as k,j as e}from"./index-CJWZi9CB.js";import{B as G}from"./Breadcrumb-DR6zDa-i.js";import{P as U}from"./PageContainer-BR_WMDrZ.js";import{I as H,a as R}from"./index-C94E8ais.js";import{X as V,c as X,z as q}from"./index.esm-CBP19pFL.js";import{C as p}from"./CustomFormLabel-Dc-sew0o.js";import{C as K}from"./CustomSelect-DzMMXHqr.js";import{C as h}from"./CustomTextField-DO2tpUr9.js";import{i as L,f as _}from"./index-BAiQVf-_.js";import{B as d}from"./Box-B21Vn3Wr.js";import{S as g}from"./Stack-C8hAk-Ua.js";import{T as s}from"./Typography-DW8TAfFy.js";import{B as C}from"./Button-BH1WbAiu.js";import{D as S}from"./Divider-lbj2_b8Q.js";import{M as T}from"./MenuItem-DU8MVoCc.js";import{G as u}from"./Grid2-TKUllLdh.js";import{P as $}from"./Paper-Dk0UhltF.js";import{T as J}from"./TableContainer-C29JBPns.js";import{T as Q,d as Y,b as A,c as l,a as Z}from"./TableRow-BlqcCBcb.js";import{T as w}from"./Tooltip-BXh8ffn_.js";import{I as D}from"./IconButton-Cf6Oa_Gi.js";import{A as ee}from"./Alert-NqiMgJWO.js";import{B as te}from"./BlankCard-CX0_suEU.js";import{C as re}from"./CardContent-B4ITIunY.js";import"./index-BwqtTtay.js";import"./useSlotProps-Dmx4i6VU.js";import"./Link-DrUusogV.js";import"./Select-BdS4d3Pw.js";import"./Popover-C4QiusQk.js";import"./isHostComponent-DVu5iVWx.js";import"./useSlot-BJnJs1tW.js";import"./Modal-BmV9fUd8.js";import"./getReactNodeRef-CxaND9dZ.js";import"./ownerWindow-CPegdbNg.js";import"./createChainedFunction-BO_9K8Jh.js";import"./utils-C-EoFTAL.js";import"./Portal-BXG2mGLy.js";import"./debounce-Be36O1Ab.js";import"./Grow-rhCcvyQJ.js";import"./List-CPHbMiuQ.js";import"./utils-DoM3o7-Q.js";import"./useControlled-Cuh16IWT.js";import"./useId-5Do1p0JB.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-D8zMB56u.js";import"./TextField-ZPSYDyyk.js";import"./FormControl-CoJ51_a0.js";import"./isMuiElement-DUOjtQlD.js";import"./index-BRTItZEI.js";import"./createStack-B05ZxkoV.js";import"./composeClasses-CkcSq-l_.js";import"./resolveProps-CxWqPvcr.js";import"./dividerClasses-ORbXH3Pu.js";import"./listItemTextClasses-C__13pSQ.js";import"./Popper-DtoIJ5hI.js";import"./Close-4pq8Nglm.js";import"./Card-BdzGKbvD.js";const ie=()=>{const{addInvoice:B,invoices:j}=b.useContext(H),[W,y]=b.useState(!1),I=k(),[o,c]=b.useState({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]});b.useEffect(()=>{if(j.length>0){const r=j[j.length-1].id;c(t=>({...t,id:r+1}))}else c(r=>({...r,id:1}))},[j]);const f=r=>{let t=0;r.forEach(n=>{const m=parseFloat(n.unitPrice)||0,M=parseInt(n.units)||0,P=m*M;t+=P,n.unitTotalPrice=P});const i=t*.1,a=t+i;return{subtotal:t,vat:i,grandTotal:a}},x=r=>{const{name:t,value:i}=r.target;c(a=>{const n={...a,[t]:i},m=f(n.orders);return{...n,...m}})},v=(r,t,i)=>{c(a=>{const n=[...a.orders];n[r]={...n[r],[t]:i};const m=f(n);return{...a,orders:n,...m}})},F=()=>{c(r=>{const t=[...r.orders,{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],i=f(t);return{...r,orders:t,...i}})},z=r=>{c(t=>{const i=t.orders.filter((n,m)=>m!==r),a=f(i);return{...t,orders:i,...a}})},E=async r=>{r.preventDefault();try{await B(o),c({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]}),y(!0),setTimeout(()=>{y(!1)},5e3),I("/apps/invoice/list")}catch(t){console.error("Error adding invoice:",t)}},O=L(new Date(o.date))?new Date(o.date):new Date,N=_(O,"EEEE, MMMM dd, yyyy");return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:E,children:e.jsxs(d,{children:[e.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(s,{variant:"h5",children:["# ",o.id]}),e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(C,{variant:"outlined",color:"error",onClick:()=>{I("/apps/invoice/list")},children:"Cancel"}),e.jsx(C,{type:"submit",variant:"contained",color:"primary",children:"Create Invoice"})]})]}),e.jsx(S,{}),e.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(d,{children:[e.jsx(p,{htmlFor:"demo-simple-select",children:"Order Status"}),e.jsxs(K,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o.status,onChange:x,disabled:!0,children:[e.jsx(T,{value:"Pending",children:"Pending"}),e.jsx(T,{value:"Shipped",children:"Shipped"}),e.jsx(T,{value:"Delivered",children:"Delivered"})]})]}),e.jsxs(d,{textAlign:"right",children:[e.jsx(p,{htmlFor:"demo-simple-select",children:"Order Date"}),e.jsxs(s,{variant:"body1",children:[" ",N]})]})]}),e.jsx(S,{}),e.jsxs(u,{container:!0,spacing:3,mb:4,children:[e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"bill-from",children:"Bill From"}),e.jsx(h,{id:"bill-from",name:"billFrom",value:o.billFrom,onChange:x,fullWidth:!0})]}),e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"bill-to",sx:{mt:{xs:0,sm:3}},children:"Bill To"}),e.jsx(h,{name:"billTo",value:o.billTo,onChange:x,fullWidth:!0})]}),e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"From Address",sx:{mt:0},children:"From Address"}),e.jsx(h,{name:"billFromAddress",value:o.billFromAddress,onChange:x,fullWidth:!0})]}),e.jsxs(u,{size:{xs:12,sm:6},children:[e.jsx(p,{htmlFor:"Bill To Address",sx:{mt:0},children:"Bill To Address"}),e.jsx(h,{name:"billToAddress",value:o.billToAddress,onChange:x,fullWidth:!0})]})]}),e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",children:"Items Details :"}),e.jsx(C,{onClick:F,variant:"contained",color:"primary",startIcon:e.jsx(V,{width:18}),children:"Add Item"})]}),e.jsx($,{variant:"outlined",children:e.jsx(J,{sx:{whiteSpace:{xs:"nowrap",md:"unset"}},children:e.jsxs(Q,{children:[e.jsx(Y,{children:e.jsxs(A,{children:[e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Item Name"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Unit Price"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Units"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Total Cost"})}),e.jsx(l,{}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Actions"})})]})}),e.jsx(Z,{children:o.orders.map((r,t)=>e.jsxs(A,{children:[e.jsx(l,{children:e.jsx(h,{type:"text",value:r.itemName,placeholder:"Item Name",onChange:i=>v(t,"itemName",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(h,{type:"number",value:r.unitPrice,placeholder:"Unit Price",onChange:i=>v(t,"unitPrice",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(h,{type:"number",value:r.units,placeholder:"Units",onChange:i=>v(t,"units",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(s,{variant:"body1",children:r.unitTotalPrice})}),e.jsx(l,{}),e.jsxs(l,{children:[e.jsx(w,{title:"Add Item",children:e.jsx(D,{onClick:F,color:"primary",children:e.jsx(X,{width:22})})}),e.jsx(w,{title:"Delete Item",children:e.jsx(D,{onClick:()=>z(t),color:"error",children:e.jsx(q,{width:22})})})]})]},t))})]})})}),e.jsxs(d,{p:3,bgcolor:"primary.light",mt:3,children:[e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"Sub Total:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.subtotal})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"VAT:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.vat})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"Grand Total:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.grandTotal})]})]}),W&&e.jsx(ee,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Invoice added successfully."})]})})})},se=[{to:"/",title:"Home"},{title:"Invoice Create"}],at=()=>e.jsx(R,{children:e.jsxs(U,{title:"Create Invoice",description:"this is Create Invoice",children:[e.jsx(G,{title:"Create Invoice",items:se}),e.jsx(te,{children:e.jsx(re,{children:e.jsx(ie,{})})})]})});export{at as default};
