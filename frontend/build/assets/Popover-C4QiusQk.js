import{r as l,c as Po,j as R}from"./index-CJWZi9CB.js";import{g as go,h as vo,s as _,c as X,d as yo,a as wo}from"./Typography-DW8TAfFy.js";import{i as Eo}from"./isHostComponent-DVu5iVWx.js";import{u as Y}from"./useSlot-BJnJs1tW.js";import{M as xo}from"./Modal-BmV9fUd8.js";import{P as bo}from"./Paper-Dk0UhltF.js";import{o as q}from"./getReactNodeRef-CxaND9dZ.js";import{o as J}from"./ownerWindow-CPegdbNg.js";import{d as Ro}from"./debounce-Be36O1Ab.js";import{G as To}from"./Grow-rhCcvyQJ.js";function Co(e){return vo("MuiPopover",e)}go("MuiPopover",["root","paper"]);function K(e,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=e.height/2:o==="bottom"&&(s=e.height),s}function Q(e,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=e.width/2:o==="right"&&(s=e.width),s}function Z(e){return[e.horizontal,e.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function T(e){return typeof e=="function"?e():e}const Oo=e=>{const{classes:o}=e;return wo({root:["root"],paper:["paper"]},Co,o)},zo=_(xo,{name:"MuiPopover",slot:"Root",overridesResolver:(e,o)=>o.root})({}),Mo=_(bo,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),$o=l.forwardRef(function(o,s){const C=Po({props:o,name:"MuiPopover"}),{action:oo,anchorEl:c,anchorOrigin:m={vertical:"top",horizontal:"left"},anchorPosition:O,anchorReference:P="anchorEl",children:to,className:eo,container:ro,elevation:z=8,marginThreshold:i=16,open:f,PaperProps:no={},slots:so={},slotProps:v={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:y=To,transitionDuration:w="auto",TransitionProps:{onEntering:M,...S}={},disableScrollLock:E=!1,...io}=C,u=(v==null?void 0:v.paper)??no,x=l.useRef(),b={...C,anchorOrigin:m,anchorReference:P,elevation:z,marginThreshold:i,externalPaperSlotProps:u,transformOrigin:g,TransitionComponent:y,transitionDuration:w,TransitionProps:S},k=Oo(b),W=l.useCallback(()=>{if(P==="anchorPosition")return O;const t=T(c),n=(t&&t.nodeType===1?t:q(x.current).body).getBoundingClientRect();return{top:n.top+K(n,m.vertical),left:n.left+Q(n,m.horizontal)}},[c,m.horizontal,m.vertical,O,P]),j=l.useCallback(t=>({vertical:K(t,g.vertical),horizontal:Q(t,g.horizontal)}),[g.horizontal,g.vertical]),D=l.useCallback(t=>{const r={width:t.offsetWidth,height:t.offsetHeight},n=j(r);if(P==="none")return{top:null,left:null,transformOrigin:Z(n)};const $=W();let d=$.top-n.vertical,h=$.left-n.horizontal;const F=d+r.height,G=h+r.width,I=J(T(c)),B=I.innerHeight-i,V=I.innerWidth-i;if(i!==null&&d<i){const a=d-i;d-=a,n.vertical+=a}else if(i!==null&&F>B){const a=F-B;d-=a,n.vertical+=a}if(i!==null&&h<i){const a=h-i;h-=a,n.horizontal+=a}else if(G>V){const a=G-V;h-=a,n.horizontal+=a}return{top:`${Math.round(d)}px`,left:`${Math.round(h)}px`,transformOrigin:Z(n)}},[c,P,W,j,i]),[ao,H]=l.useState(f),p=l.useCallback(()=>{const t=x.current;if(!t)return;const r=D(t);r.top!==null&&t.style.setProperty("top",r.top),r.left!==null&&(t.style.left=r.left),t.style.transformOrigin=r.transformOrigin,H(!0)},[D]);l.useEffect(()=>(E&&window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)),[c,E,p]);const lo=(t,r)=>{M&&M(t,r),p()},co=()=>{H(!1)};l.useEffect(()=>{f&&p()}),l.useImperativeHandle(oo,()=>f?{updatePosition:()=>{p()}}:null,[f,p]),l.useEffect(()=>{if(!f)return;const t=Ro(()=>{p()}),r=J(c);return r.addEventListener("resize",t),()=>{t.clear(),r.removeEventListener("resize",t)}},[c,f,p]);let L=w;w==="auto"&&!y.muiSupportAuto&&(L=void 0);const po=ro||(c?q(T(c)).body:void 0),A={slots:so,slotProps:{...v,paper:u}},[fo,N]=Y("paper",{elementType:Mo,externalForwardedProps:A,additionalProps:{elevation:z,className:X(k.paper,u==null?void 0:u.className),style:ao?u.style:{...u.style,opacity:0}},ownerState:b}),[U,{slotProps:uo,...ho}]=Y("root",{elementType:zo,externalForwardedProps:A,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:po,open:f},ownerState:b,className:X(k.root,eo)}),mo=yo(x,N.ref);return R.jsx(U,{...ho,...!Eo(U)&&{slotProps:uo,disableScrollLock:E},...io,ref:s,children:R.jsx(y,{appear:!0,in:f,onEntering:lo,onExited:co,timeout:L,...S,children:R.jsx(fo,{...N,ref:mo,children:to})})})});export{$o as P,Mo as a};
