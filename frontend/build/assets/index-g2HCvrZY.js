import{r as s,B as T,A as U,j as r}from"./index-CJWZi9CB.js";import{C as h}from"./CustomTextField-DO2tpUr9.js";import{C as c}from"./CustomFormLabel-Dc-sew0o.js";import{A as W}from"./AuthSocialButtons-CQoR_qlX.js";import{T as A}from"./Typography-DW8TAfFy.js";import{B}from"./Box-B21Vn3Wr.js";import{D as L}from"./Divider-lbj2_b8Q.js";import{S as N}from"./Stack-DsJQu8jM.js";import{A as E}from"./Alert-NqiMgJWO.js";import{B as q}from"./Button-BH1WbAiu.js";import"./TextField-ZPSYDyyk.js";import"./useSlot-BJnJs1tW.js";import"./Paper-Dk0UhltF.js";import"./FormControl-CoJ51_a0.js";import"./utils-DoM3o7-Q.js";import"./useFormControl-D8zMB56u.js";import"./isMuiElement-DUOjtQlD.js";import"./useId-5Do1p0JB.js";import"./formControlState-Dq1zat_P.js";import"./Select-BdS4d3Pw.js";import"./index-BwqtTtay.js";import"./Popover-C4QiusQk.js";import"./isHostComponent-DVu5iVWx.js";import"./Modal-BmV9fUd8.js";import"./getReactNodeRef-CxaND9dZ.js";import"./ownerWindow-CPegdbNg.js";import"./createChainedFunction-BO_9K8Jh.js";import"./utils-C-EoFTAL.js";import"./Portal-BXG2mGLy.js";import"./debounce-Be36O1Ab.js";import"./Grow-rhCcvyQJ.js";import"./List-CPHbMiuQ.js";import"./useSlotProps-Dmx4i6VU.js";import"./useControlled-Cuh16IWT.js";import"./Avatar-YolhUzp1.js";import"./dividerClasses-ORbXH3Pu.js";import"./createStack-B05ZxkoV.js";import"./composeClasses-CkcSq-l_.js";import"./Close-4pq8Nglm.js";import"./IconButton-Cf6Oa_Gi.js";import"./resolveProps-CxWqPvcr.js";function D(){const[i,p]=s.useState(""),[n,g]=s.useState(""),[o,f]=s.useState(""),[m,x]=s.useState(""),[k,w]=s.useState(""),[C,e]=s.useState(""),[b,l]=s.useState(""),[j,d]=s.useState(!1),v=a=>{const P=/[A-Z]/.test(a),u=/[a-z]/.test(a),y=/\d/.test(a),F=/[!@#$%^&*(),.?":{}|<>]/.test(a);return a.length<8?"Password harus minimal 8 karakter":P?u?y?F?null:"Password harus mengandung karakter khusus":"Password harus mengandung angka":"Password harus mengandung huruf kecil":"Password harus mengandung huruf besar"},R=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a);return{name:i,setName:p,email:n,setEmail:g,username:o,setUsername:f,password:m,setPassword:x,confirmPassword:k,setConfirmPassword:w,error:C,success:b,loading:j,handleRegister:async(a,S)=>{if(a.preventDefault(),e(""),l(""),!i.trim()){e("Nama diperlukan");return}if(!o.trim()){e("Username diperlukan");return}if(o.length<3){e("Username harus minimal 3 karakter");return}if(!n.trim()){e("Email diperlukan");return}if(!R(n)){e("Format email tidak valid");return}const P=v(m);if(P){e(P);return}if(m!==k){e("Konfirmasi password tidak cocok");return}d(!0);try{const u=await fetch(T+U+"/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.trim(),username:o.trim(),email:n.trim(),password:m})}),y=await u.json();u.ok?(l("Registrasi berhasil! Silakan login dengan akun yang baru dibuat."),p(""),g(""),f(""),x(""),w(""),S&&setTimeout(()=>{S("/auth/login")},2e3)):e(y.error||y.message||"Registrasi gagal")}catch(u){console.error("Register error:",u),e("Terjadi kesalahan saat registrasi")}finally{d(!1)}},validatePassword:v}}const br=({title:i,subtitle:p,subtext:n})=>{const{name:g,setName:o,email:f,setEmail:m,username:x,setUsername:k,password:w,setPassword:C,confirmPassword:e,setConfirmPassword:b,error:l,success:j,loading:d,handleRegister:v}=D(),R=()=>{window.location.href="/auth/login"};return r.jsxs(r.Fragment,{children:[i?r.jsx(A,{fontWeight:"700",variant:"h3",mb:1,children:i}):null,n,r.jsx(W,{title:"Sign up with"}),r.jsx(B,{mt:3,children:r.jsx(L,{children:r.jsx(A,{component:"span",color:"textSecondary",variant:"h6",fontWeight:"400",position:"relative",px:2,children:"or sign up with"})})}),r.jsxs("form",{onSubmit:t=>v(t,R),children:[r.jsxs(N,{mb:3,children:[r.jsx(c,{htmlFor:"name",children:"Full Name"}),r.jsx(h,{id:"name",variant:"outlined",fullWidth:!0,value:g,onChange:t=>o(t.target.value),required:!0}),r.jsx(c,{htmlFor:"username",children:"Username"}),r.jsx(h,{id:"username",variant:"outlined",fullWidth:!0,value:x,onChange:t=>k(t.target.value),required:!0,helperText:"Minimal 3 karakter, hanya huruf, angka, dan underscore"}),r.jsx(c,{htmlFor:"email",children:"Email Address"}),r.jsx(h,{id:"email",type:"email",variant:"outlined",fullWidth:!0,value:f,onChange:t=>m(t.target.value),required:!0}),r.jsx(c,{htmlFor:"password",children:"Password"}),r.jsx(h,{id:"password",type:"password",variant:"outlined",fullWidth:!0,value:w,onChange:t=>C(t.target.value),required:!0,helperText:"Minimal 8 karakter, harus mengandung huruf besar, huruf kecil, angka, dan karakter khusus"}),r.jsx(c,{htmlFor:"confirmPassword",children:"Confirm Password"}),r.jsx(h,{id:"confirmPassword",type:"password",variant:"outlined",fullWidth:!0,value:e,onChange:t=>b(t.target.value),required:!0})]}),l&&r.jsx(E,{severity:"error",sx:{mb:2},children:l}),j&&r.jsx(E,{severity:"success",sx:{mb:2},children:j}),r.jsx(q,{color:"primary",variant:"contained",size:"large",fullWidth:!0,type:"submit",disabled:d,children:d?"Creating Account...":"Sign Up"})]}),p]})};export{br as default};
